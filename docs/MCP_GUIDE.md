# Antigravity Studio - AI 协作剪辑指令规范

本指南旨在帮助 AI Agent 指导和执行基于 Remotion 引擎的自动化剪辑任务。

## 🛠 实时反馈与调试
Antigravity Studio 采用 **双向同步架构**：
- **实时预览**：当你调用修改指令时，预览端会通过 WebSocket 实时刷新画面。
- **状态感知**：你可以通过 `get_context` 接口查询用户当前在预览器中选中的 Clip ID，从而实现针对性的精准修改。

---

## 📋 AI 剪辑核心规范

### 1. 声明式轨道管理
不同于传统剪辑，我们优先通过修改 `project_data.json` 来驱动 Remotion：
1. **背景层 (Layer 0)**：通常放置底色或全屏背景。
2. **主视觉层 (Main Track)**：放置视频片段或图片。
3. **效果层 (Overlay)**：放置透明素材或文字遮罩。

### 2. 精准的时间对齐 (TTS Sync)
当添加配音 (Voiceover) 时，AI 必须：
- 获取音频精确时长（单位：秒）。
- 确保视频片段的 `duration` 与音频时长强一致。
- 填充字幕的 `start` 和 `duration` 与对应的音频区间完全匹配。

### 3. 抗抖动动画原则
- 优先使用内建的线性插值或贝塞尔曲线。
- **缩放建议**：起始 Scale 1.0 -> 结束 Scale 1.2（3秒内），这是最平滑的变焦效果。
- **位置建议**：坐标系为 `[0, 1]`。`(0.5, 0.5)` 是中心点。

---

## 🎨 视觉风格指导 (Prompting)

### 文字处理
- **高对比度**：在复杂背景下，文字必须带 `textShadow` 或 `bg_color`。
- **位置控制**：默认 `y: 0.8` (分屏下方)，`y: 0.5` (居中)。

### 转场与动效
- **入场**：使用 `fade-in` 或 `spring-up`。
- **出场**：使用 `dissolve` (15帧左右)。

---

## ⚠️ 故障排除：常见错误
- **ID 冲突**：确保每个 Clip 有在全球唯一的 ID（如 `clip_2024_01`）。
- **路径转义**：在 Windows 路径中，务必使用正斜杠 `/` 或双反斜杠 `\\`，推荐使用相对路径 `/materials/xxx`。
- **重叠校验**：同一轨道上的片段时间轴绝对不能有重叠，否则预览器会抛出 `null` 引用。
